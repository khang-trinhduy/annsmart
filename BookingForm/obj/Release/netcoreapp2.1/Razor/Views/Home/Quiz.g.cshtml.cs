#pragma checksum "C:\Users\trinh\source\repos\annhome-booking-master\BookingForm\Views\Home\Quiz.cshtml" "{ff1816ec-aa5e-4d10-87f7-6f4963833460}" "5ea256b9ac0f541115484b394886bb096ce72968"
// <auto-generated/>
#pragma warning disable 1591
[assembly: global::Microsoft.AspNetCore.Razor.Hosting.RazorCompiledItemAttribute(typeof(AspNetCore.Views_Home_Quiz), @"mvc.1.0.view", @"/Views/Home/Quiz.cshtml")]
[assembly:global::Microsoft.AspNetCore.Mvc.Razor.Compilation.RazorViewAttribute(@"/Views/Home/Quiz.cshtml", typeof(AspNetCore.Views_Home_Quiz))]
namespace AspNetCore
{
    #line hidden
    using System;
    using System.Collections.Generic;
    using System.Linq;
    using System.Threading.Tasks;
    using Microsoft.AspNetCore.Mvc;
    using Microsoft.AspNetCore.Mvc.Rendering;
    using Microsoft.AspNetCore.Mvc.ViewFeatures;
#line 1 "C:\Users\trinh\source\repos\annhome-booking-master\BookingForm\Views\_ViewImports.cshtml"
using BookingForm;

#line default
#line hidden
#line 2 "C:\Users\trinh\source\repos\annhome-booking-master\BookingForm\Views\_ViewImports.cshtml"
using BookingForm.Models;

#line default
#line hidden
    [global::Microsoft.AspNetCore.Razor.Hosting.RazorSourceChecksumAttribute(@"SHA1", @"5ea256b9ac0f541115484b394886bb096ce72968", @"/Views/Home/Quiz.cshtml")]
    [global::Microsoft.AspNetCore.Razor.Hosting.RazorSourceChecksumAttribute(@"SHA1", @"a961fb0ce4f853b3e2c4fa2992c1d9302b2824bf", @"/Views/_ViewImports.cshtml")]
    public class Views_Home_Quiz : global::Microsoft.AspNetCore.Mvc.Razor.RazorPage<BookingForm.Models.Test>
    {
        #pragma warning disable 1998
        public async override global::System.Threading.Tasks.Task ExecuteAsync()
        {
            BeginContext(32, 86, true);
            WriteLiteral("<div class=\"container1\">\r\n    <div class=\"alert alert-primary\" role=\"alert\">\r\n        ");
            EndContext();
            BeginContext(119, 10, false);
#line 4 "C:\Users\trinh\source\repos\annhome-booking-master\BookingForm\Views\Home\Quiz.cshtml"
   Write(Model.Name);

#line default
#line hidden
            EndContext();
            BeginContext(129, 16, true);
            WriteLiteral("\r\n    </div>\r\n\r\n");
            EndContext();
            BeginContext(211, 484, true);
            WriteLiteral(@"    <div class=""timer-page"">
        <p id=""timer-label"">Thời gian còn lại: <span id=""timer-val""></span></p>
    </div>
        <div id=""accordion"">
            <div class=""qtn-page"">
                
            </div>
        </div>
        <input type=""number"" name=""score"" value=""0"" min=""0"" id=""score"" hidden/>
        <div id=""btn-submit"">
            <input id=""submit"" type=""submit"" class=""btn btn-submit"" name=""submit"" value=""Kết thúc"" />
        </div>
        
");
            EndContext();
            BeginContext(712, 1032, true);
            WriteLiteral(@"</div>

<style>
    .timer-page{
        display:block;
        text-align: right;
    }
    .container1 {
        padding-top: 20px;
        border: 2px solid darkcyan;
        padding-bottom: 20px;
        padding-left: 20px;
        padding-right: 20px;
    }
    #btn-submit {
        text-align: right;
    }
    .btn-submit {
        display: block;
    }
    #submit {
        margin-top: 20px;
        margin-right: 20px;
        background: #50e48b;
    }
    .alert-primary {
        color: black !important;
        font-family: -webkit-pictograph;
        font-size: x-large;
        background-color: white !important;
        border: white !important;
        text-align: center;
    }
</style>

<script src=""https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js""></script>
<script src=""https://unpkg.com/sweetalert/dist/sweetalert.min.js""></script>
<script>
    var date = new Date();
    var temp_date = new Date(date);
    temp_date.setMinutes(date.getMinu");
            WriteLiteral("tes() + ");
            EndContext();
            BeginContext(1745, 22, false);
#line 62 "C:\Users\trinh\source\repos\annhome-booking-master\BookingForm\Views\Home\Quiz.cshtml"
                                        Write(Html.Raw(ViewBag.time));

#line default
#line hidden
            EndContext();
            BeginContext(1767, 735, true);
            WriteLiteral(@");
    var countDownDate = temp_date.getTime();

    var x = setInterval(function () {

        var now = new Date().getTime();

        var distance = countDownDate - now;

        var days = Math.floor(distance / (1000 * 60 * 60 * 24));
        var hours = Math.floor((distance % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
        var minutes = Math.floor((distance % (1000 * 60 * 60)) / (1000 * 60));
        var seconds = Math.floor((distance % (1000 * 60)) / 1000);

        document.getElementById(""timer-val"").innerHTML = minutes + ""m "" + seconds + ""s "";

        if (distance < 0) {
            clearInterval(x);
            $('#submit').click();
        }
    }, 1000);

    var questions = JSON.parse('");
            EndContext();
            BeginContext(2503, 41, false);
#line 84 "C:\Users\trinh\source\repos\annhome-booking-master\BookingForm\Views\Home\Quiz.cshtml"
                           Write(Html.Raw(Json.Serialize(Model.Questions)));

#line default
#line hidden
            EndContext();
            BeginContext(2544, 25, true);
            WriteLiteral("\');\r\n    var testname = \'");
            EndContext();
            BeginContext(2570, 20, false);
#line 85 "C:\Users\trinh\source\repos\annhome-booking-master\BookingForm\Views\Home\Quiz.cshtml"
               Write(Html.Raw(Model.Name));

#line default
#line hidden
            EndContext();
            BeginContext(2590, 3072, true);
            WriteLiteral(@"';
    var answers = [];
    function change_answer(number, answer) {
        var id = '#answer' + number;
        $(id).val(answer);
    }

    function addquestion(content, baits, number, count) {
        var elem = '<div class=""card"">' +
            '<div class=""card-header"" id=""heading' + count + '"">' +
            '<h5 class=""mb-0"">' +
            '<button class=""btn btn-link"" data-toggle=""collapse"" data-target=""#collapse' + count + '"" aria-expanded=""true"" aria-controls=""collapse' + count + '"">' +
            'Question: ' + count.toString() +
            '</button>' +
            '</h5>' +
            '</div>' +
            '<div id=""collapse' + count + '"" class=""collapse"" aria-labelledby=""heading' + count + '"" data-parent=""#accordion"">' +
            '<div class=""card-body"">' +
            '<div class=""row"">' +
            '<div class=""col-12"">' +
            '<label class=""control-label"">' +
            content +
            '</label>';
            for (var i = 1; i <= baits.leng");
            WriteLiteral(@"th; i++) {
                elem = elem + '<div class=""custom-control custom-radio"">' +
                    '<input type=""radio"" class=""custom-control-input"" onclick=""change_answer(' + number + ', \'' + baits[i - 1].content + '\')"" id=""' + i + number + '"" name=""radio-stacked' + number + ' "" required>' +
                    ' <label class=""custom-control-label"" for=""' + i + number + '"">' + baits[i - 1].content + '</label>' +
                    '</div>';
             }

            elem = elem +
            '<div class=""invalid-feedback"">Chọn một đáp án</div>' +
            '</div>' +
            '<input type=""text"" name=""answers"" value="""" id=""answer' + number + '"" hidden />' +
            '</div>' +
            '</div>' +
            '</div>' +
            '</div>' +
            '</div>';
        $('.qtn-page').append(elem);
    }

    $('#submit').on('click', function () {
        $('#timer-val').val('');
        var correct = 0;
        for (i = 1; i <= questions.length; i++) {
       ");
            WriteLiteral(@"     var curid = '#answer' + questions[i - 1].number;
            var real_answer = $(curid).val();
            if (real_answer == """") {
                var answer = { testname: testname, question_number: questions[i - 1].number, answer: """", isnotcorrect: false };
                answers.push(answer);
                console.log(answer);
            }
            else if (questions[i - 1].answer == real_answer) {
                correct += 1;
                var answer = { testname: testname, question_number: questions[i - 1].number, answer: real_answer, isnotcorrect: false };
                answers.push(answer);
                console.log(answer);
            }
            else {
                var answer = { testname: testname, question_number: questions[i - 1].number, answer: real_answer, isnotcorrect: true };
                answers.push(answer);
                console.log(answer);
            }
            
        }
        var data = JSON.stringify(answers);
        var url = '");
            EndContext();
            BeginContext(5663, 26, false);
#line 152 "C:\Users\trinh\source\repos\annhome-booking-master\BookingForm\Views\Home\Quiz.cshtml"
              Write(Url.Action("Quiz", "Home"));

#line default
#line hidden
            EndContext();
            BeginContext(5689, 709, true);
            WriteLiteral(@"';
        $('#score').val(correct * 20);
        swal({
            title: ""Kết quả!"",
            text: correct.toString() + '/' + questions.length.toString(),
            type: ""success"",
            timer: 3000,
            icon: ""success""
        }).then(function () {
            $.ajax({
                type: 'post',
                url: url,
                headers: {
                    'Content-Type': 'application/json'
                },
                dataType: 'json',
                data: data,
                success: function (newdata) {
                    console.log('Data received: ');
                    console.log(newdata);
                    var new_url = '");
            EndContext();
            BeginContext(6399, 28, false);
#line 172 "C:\Users\trinh\source\repos\annhome-booking-master\BookingForm\Views\Home\Quiz.cshtml"
                              Write(Url.Action("Result", "Home"));

#line default
#line hidden
            EndContext();
            BeginContext(6427, 499, true);
            WriteLiteral(@"' + '?testname=' + testname.split(' ').join('_');
                    window.location = new_url;
                },
                error: function () {
                    console.log('Error occured ');
                }
            });
        });
    });

    $(document).ready(function () {
        for (i = 0; i < questions.length; i++) {
            addquestion(questions[i].content, questions[i].baits, questions[i].number, i + 1);
        }
        
    });

</script>


");
            EndContext();
        }
        #pragma warning restore 1998
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.ViewFeatures.IModelExpressionProvider ModelExpressionProvider { get; private set; }
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.IUrlHelper Url { get; private set; }
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.IViewComponentHelper Component { get; private set; }
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.Rendering.IJsonHelper Json { get; private set; }
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.Rendering.IHtmlHelper<BookingForm.Models.Test> Html { get; private set; }
    }
}
#pragma warning restore 1591
