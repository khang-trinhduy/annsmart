@model BookingForm.Models.ManagerModal;

@{
    ViewData["Title"] = " - Doanh thu";
}
<img title="Annhome-logo" src="~/images/Ann_Logo.png" style="width:340px; height:172px; display:block;margin-left:auto;margin-right:auto;" alt="Annhome Logo" />

<h2 style="text-align:right">Xin chào  @Model.manager.FullName</h2>

<h6 style="font-style:italic; text-align:right">TP. Hồ Chí Minh, ngày @DateTime.Now.Day  tháng @DateTime.Now.Month năm @DateTime.Now.Year</h6>

    <h2 style="text-align:center; font-family:Calibri">Doanh thu</h2>
    @*<a asp-action="Profit">Doanh thu</a>*@
    @*<a asp-action="Compare">So sánh</a>*@
    <a asp-action="Target">Mục tiêu</a>
    <table class="table">
        <thead>
            <tr>
                <th>
                    STT
                </th>
                <th>
                    Thông tin sale
                </th>
                <th>
                    Số HĐ đặt chỗ
                </th>
                <th>
                    Tổng doanh thu
                </th>
            </tr>
        </thead>
        <tbody>
            @{int count = 1; }
            @foreach (var item in Model.sales)
            {
                <tr>
                    <td>
                        @count
                    </td>
                    <td>
                        @Html.DisplayFor(modelItem => item.name)
                    </td>
                    <td>
                        @{
                            int nOfContracts = Model.appoinments.Count(m => m.sale == item.email && m.Official == true);
                            if (nOfContracts > 0)
                            {
                                @nOfContracts
                            }
                            else
                            {

                            }
                        }
                    </td>
                    <td>
                        @{
                            double profit = Model.appoinments.Where(m => m.sale == item.email && m.Official == true).Sum(m => m.Cash);
                            if (profit > 0)
                            {
                                @String.Format("{0:N0}", profit)
                            }
                            else
                            {

                            }
                        }
                    </td>
                </tr>
                count++;
            }

        </tbody>
    </table>
    @{

        double cash = @Model.appoinments.Where(m => m.Official == true).Sum(m => m.Cash);
        string _cash = String.Format("{0:N0}", cash);


    }
    <div style="text-align:right; display:block"><label style="text-align:right">Tổng cộng: @_cash VNĐ</label></div>

    <style>
            table, td, th {
                border: 1px solid #ddd;
                text-align: left;
            }

            table {
                border-collapse: collapse;
                width: 100%;
            }

            th, td {
                padding: 15px;
            }

            th, td {
                text-align: center;
                vertical-align: middle;
            }

            table {
                color: #333;
                font-family: Helvetica, Arial, sans-serif;
                width: 640px;
                border-collapse: collapse;
                border-spacing: 0;
            }

            td, th {
                border: 1px solid transparent; /* No more visible border */
                height: 30px;
                transition: all 0.3s; /* Simple transition for hover effect */
            }

            th {
                border: 1px solid #ec5eec;
                background: #ec5eec;
                font-weight: bold;
                color: white;
            }

            td {
                background: #FAFAFA;
                text-align: center;
            }

            /* Cells in even rows (2,4,6...) are one color */
            tr:nth-child(even) td {
                background: #F1F1F1;
            }

            /* Cells in odd rows (1,3,5...) are another (excludes header cells)  */
            tr:nth-child(odd) td {
                background: #FEFEFE;
            }

            tr td:hover {
                background: #666;
                color: #FFF;
            }

            /*table {
            overflow: hidden;
            display: inline-block;
        }*/

            tr:hover {
                background-color: #faf2de;
            }


            td, th {
                position: relative;
            }

                td:hover::after,
                th:hover::after {
                    content: "";
                    position: absolute;
                    background-color: #ec5eec;
                    left: 0;
                    top: -5000px;
                    height: 1000px;
                    width: 100%;
                    z-index: -1;
                }
    </style>
